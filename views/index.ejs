<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <script src="/script.js" defer></script>
    <title>Better Cinestar</title>
  </head>
  <body>
    <nav><img src="/images/logo4x.png" alt="Better CineStar logo" /></nav>

    <%- include("locationDropdown"); %>

    <div class="input-container">
      <div class="label">
        <img class="label-icon" src="/images/sortIcon.svg" alt="sort icon" />
        <p class="label-text">Sortiranje</p>
      </div>

      <div id="sortFieldAndOrderContainer">
        <div class="input-element secondary-input gap-in-input">
          <p class="selectedValue">IMDB ocjena</p>
          <img src="/images/dropdownArrow.svg" alt="dropdown arrow" />
        </div>
        <div class="input-element secondary-input" id="changeOrderButton">
          <div class="icon-line ascOrder"></div>
          <div class="icon-line ascOrder"></div>
          <div class="icon-line ascOrder"></div>
        </div>
      </div>
    </div>

    <div id="movieCardsContainer">
      <% movies.forEach(movie=>{ %>
      <div
        data-background-image="<%= movie.backgroundImage %>"
        class="movieCard"
        style="
          background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)),
            url('<%= movie.backgroundImage %>');
        "
      >
        <div class="movieCardHeading">
          <p class="movieTitle"><%= movie.originalTitle %></p>
          <div class="movieStats">
            <% if(movie.englishCategories){ %>
            <p><%= movie.englishCategories %></p>
            <% }else{ %>
            <p><%= movie.genres[0] %></p>
            <% } %> <% if(movie.duration){ %>
            <p>·</p>
            <p><%= movie.duration %></p>
            <% } %> <% if(movie.letterboxdRating){ %>
            <p>·</p>
            <div class="ratingIconAndValue">
              <img src="/images/letterboxdIcon.png" alt="letterboxd icon" />
              <p><%= movie.letterboxdRating %>/5</p>
            </div>
            <% } %> <% if(movie.imdbRating){ %>
            <p>·</p>
            <div class="ratingIconAndValue">
              <img src="/images/imdbIcon.png" alt="imdb icon" />
              <p><%= movie.imdbRating %>/10 %></p>
            </div>
            <% } %>
          </div>
        </div>

        <div class="movieCardInfo">
          <div class="infoContainer">
            <p class="infoLabel">Direktori</p>
            <% if(movie.englishDirectors){ %>
            <p class="infoText"><%= movie.englishDirectors.join(", ") %></p>
            <% }else{ %>
            <p class="infoText"><%= movie.director %></p>
            <% } %>
          </div>
          <div class="infoContainer">
            <p class="infoLabel">Opis</p>
            <% if(movie.englishSynopsis){ %>
            <p class="infoText"><%= movie.englishSynopsis %></p>
            <% }else{ %>
            <p class="infoText"><%= movie.synopsis %></p>
            <% } %>
          </div>
          <% if(movie.trailerLink){ %>
          <a href="<%= movie.trailerLink %>" class="trailerButton"> Trailer </a>
          <% }%>
        </div>

        <div class="movieCardPerformancesContainer">
          <div class="performanceslabel">Danas</div>
          <div class="performanceList">
            <% movie.performances.forEach(performance=>{ %>
            <div class="performanceCard">
              <p class="performanceTime"><%= performance.performanceTime %></p>
              <% performance.performanceFeatures.forEach(feature=>{ %>
              <p class="performanceFeature"><%= feature %></p>
              <% }) %>
            </div>
            <% }) %>
          </div>
        </div>
      </div>
      <% }) %>
    </div>
  </body>
</html>
